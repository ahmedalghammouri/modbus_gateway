{"ast":null,"code":"import React,{useState,useEffect}from'react';import DeviceCard from'./DeviceCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Dashboard(){const[data,setData]=useState({});const[connected,setConnected]=useState(false);useEffect(()=>{const ws=new WebSocket(\"ws://\".concat(window.location.hostname,\":8000/api/ws\"));ws.onopen=()=>setConnected(true);ws.onclose=()=>setConnected(false);ws.onmessage=e=>setData(JSON.parse(e.data));return()=>ws.close();},[]);const devices=Object.entries(data);const online=devices.filter(_ref=>{let[_,d]=_ref;return d.status==='online';}).length;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'1rem',marginBottom:'1rem'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:'1.5rem'},children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"span\",{style:{padding:'0.3rem 0.6rem',borderRadius:'4px',fontSize:'0.8rem',background:connected?'#4caf50':'#f44336',color:'white'},children:connected?'Connected':'Disconnected'}),/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'auto',color:'#999'},children:[\"Total: \",devices.length,\" | Online: \",online,\" | Offline: \",devices.length-online]})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fill, minmax(300px, 1fr))',gap:'1rem'},children:devices.map(_ref2=>{let[name,d]=_ref2;return/*#__PURE__*/_jsx(DeviceCard,{name:name,data:d},name);})}),devices.length===0&&/*#__PURE__*/_jsx(\"p\",{style:{color:'#999',textAlign:'center'},children:\"No devices configured\"})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","DeviceCard","jsx","_jsx","jsxs","_jsxs","Dashboard","data","setData","connected","setConnected","ws","WebSocket","concat","window","location","hostname","onopen","onclose","onmessage","e","JSON","parse","close","devices","Object","entries","online","filter","_ref","_","d","status","length","children","style","display","alignItems","gap","marginBottom","margin","fontSize","padding","borderRadius","background","color","marginLeft","gridTemplateColumns","map","_ref2","name","textAlign"],"sources":["C:/Users/ODOO/Documents/ODOO 19/modbus_gateway/frontend/src/components/Dashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport DeviceCard from './DeviceCard';\n\nfunction Dashboard() {\n  const [data, setData] = useState({});\n  const [connected, setConnected] = useState(false);\n\n  useEffect(() => {\n    const ws = new WebSocket(`ws://${window.location.hostname}:8000/api/ws`);\n    ws.onopen = () => setConnected(true);\n    ws.onclose = () => setConnected(false);\n    ws.onmessage = (e) => setData(JSON.parse(e.data));\n    return () => ws.close();\n  }, []);\n\n  const devices = Object.entries(data);\n  const online = devices.filter(([_, d]) => d.status === 'online').length;\n\n  return (\n    <div>\n      <div style={{ display: 'flex', alignItems: 'center', gap: '1rem', marginBottom: '1rem' }}>\n        <h2 style={{ margin: 0, fontSize: '1.5rem' }}>Dashboard</h2>\n        <span style={{ padding: '0.3rem 0.6rem', borderRadius: '4px', fontSize: '0.8rem', background: connected ? '#4caf50' : '#f44336', color: 'white' }}>\n          {connected ? 'Connected' : 'Disconnected'}\n        </span>\n        <span style={{ marginLeft: 'auto', color: '#999' }}>Total: {devices.length} | Online: {online} | Offline: {devices.length - online}</span>\n      </div>\n\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))', gap: '1rem' }}>\n        {devices.map(([name, d]) => <DeviceCard key={name} name={name} data={d} />)}\n      </div>\n      {devices.length === 0 && <p style={{ color: '#999', textAlign: 'center' }}>No devices configured</p>}\n    </div>\n  );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}